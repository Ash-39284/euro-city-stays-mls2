<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Destinations</title>
      <!-- css stylesheet -->
    <link rel="stylesheet" href="./assets/css/style.css">
 
    <!-- Bootstrap link -->
     <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">

     <!-- map script -->
      <script
  src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAJoOGB75_bpzjqUae_aj1kBl_JIZJdu4I&libraries=places&v=beta"
  async
  defer>
</script>
<script>
let map;

/* ===============================
   INIT MAP
================================ */
async function initMap() {
  await google.maps.importLibrary("maps");
  await google.maps.importLibrary("places");

  map = new google.maps.Map(document.getElementById("map"), {
    center: { lat: 50.8503, lng: 4.3517 },
    zoom: 5,
  });

  attachCardClickHandlers();
  autoOpenCityFromSearch();
}

/* ===============================
   AUTO-OPEN CITY FROM URL
================================ */
function autoOpenCityFromSearch() {
  const params = new URLSearchParams(window.location.search);
  const city = params.get("city");
  if (!city) return;

  const card = document.querySelector(
    `.place-card[data-city="${city.toLowerCase()}"]`
  );

  if (!card) return;

  card.scrollIntoView({ behavior: "smooth", block: "center" });
  card.click(); // triggers everything below
}

/* ===============================
   CARD CLICK HANDLING
================================ */
function attachCardClickHandlers() {
  document.querySelectorAll(".place-card").forEach(card => {
    card.addEventListener("click", async () => {
      collapseAllCards(card);

      const lat = parseFloat(card.dataset.lat);
      const lng = parseFloat(card.dataset.lng);

      map.panTo({ lat, lng });
      map.setZoom(11);

      await fetchPOIs(card, "tourist_attraction");
    });
  });
}

/* ===============================
   COLLAPSE OTHER CARDS
================================ */
function collapseAllCards(activeCard) {
  document.querySelectorAll(".poi-results").forEach(list => {
    if (!activeCard.contains(list)) {
      list.classList.remove("show");
      list.innerHTML = "";
    }
  });

  const activeList = activeCard.querySelector(".poi-results");
  if (activeList) activeList.classList.add("show");
}

/* ===============================
   FETCH POIs
================================ */
async function fetchPOIs(card, type) {
  const lat = parseFloat(card.dataset.lat);
  const lng = parseFloat(card.dataset.lng);
  const list = card.querySelector(".poi-results");

  list.innerHTML = `<li class="text-muted">Loading...</li>`;

  try {
    const { places } = await google.maps.places.Place.searchNearby({
      locationRestriction: {
        center: { lat, lng },
        radius: 3000,
      },
      includedTypes: [type],
      maxResultCount: 5,
      fields: ["displayName", "rating"],
    });

    list.innerHTML = "";

    if (!places.length) {
      list.innerHTML = `<li>No places found</li>`;
      return;
    }

    places.forEach(place => {
      const li = document.createElement("li");
      li.className = "poi-card mb-2";

      li.innerHTML = `
        <div class="p-2 border rounded">
          <strong>${place.displayName}</strong>
          ${place.rating ? `<span class="ms-2">⭐ ${place.rating}</span>` : ""}
        </div>
      `;

      list.appendChild(li);
    });

  } catch (err) {
    console.error(err);
    list.innerHTML = `<li>Error loading places</li>`;
  }
}

/* ===============================
   OPTIONAL BUTTON SUPPORT
================================ */
window.showAttractions = card => fetchPOIs(card, "tourist_attraction");
window.showRestaurants = card => fetchPOIs(card, "restaurant");
window.showHotels = card => fetchPOIs(card, "lodging");

/* ===============================
   BOOTSTRAP MAP LOAD
================================ */
window.addEventListener("load", initMap);


</script>

</head>
<body>
    <!-- Navbar section -->
<nav class="navbar navbar-expand-lg navbar-light bg-sky shadow-sm">
  <div class="container">
    <a class="navbar-brand fw-bold text-warning" href="index.html">Euro City Stays</a>

    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#mainNav">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div class="collapse navbar-collapse justify-content-end" id="mainNav">
      <ul class="navbar-nav">
        <li class="nav-item"><a class="nav-link text-warning" href="index.html">Home</a></li>
        <li class="nav-item"><a class="nav-link text-warning active" href="destinations.html">Destinations</a></li>
        <li class="nav-item">
          <a class="nav-link btn btn-warning text-dark px-3 ms-lg-2" href="book.html">BOOK NOW!</a>
        </li>
      </ul>
    </div>
  </div>
</nav>

<!-- DESTINATIONS -->
<section class="container my-5">

  <!-- PARIS -->
  <div class="row g-4 mb-5">
    <div class="col-md-4">
     <div class="place-card" data-city="paris" data-lat="48.8566" data-lng="2.3522">
  <img src="images/paris.jpg" alt="Paris">
  <div>
    <h6>Paris</h6>
    <small>Paris, France</small>

     <ul class="poi-results list-unstyled mt-2 collapse"></ul>
  </div>

   <div class="d-flex gap-2 mt-2">
    <button class="btn btn-sm btn-outline-primary"
      onclick="showAttractions(this)">
      Attractions
    </button>
    <button class="btn btn-sm btn-outline-success"
      onclick="showRestaurants(this)">
      Food
    </button>
    <button class="btn btn-sm btn-outline-danger"
      onclick="showHotels(this)">
      Hotels
    </button>
  </div>

  <ul class="poi-results list-unstyled mt-2"></ul>
</div>
</div>

    <div class="col-md-4">
      <div class="place-card" 
            data-city="vienna"
            data-lat="48.2082"
            data-lng="16.3738">
        <img src="images/vienna.jpg" alt="Vienna">
        <div>
          <h6>Vienna</h6>
          <small>Vienna, Austria</small>

           <ul class="poi-results list-unstyled mt-2 collapse"></ul>
        </div>

         <div class="d-flex gap-2 mt-2">
    <button class="btn btn-sm btn-outline-primary"
      onclick="showAttractions(this)">
      Attractions
    </button>
    <button class="btn btn-sm btn-outline-success"
      onclick="showRestaurants(this)">
      Food
    </button>
    <button class="btn btn-sm btn-outline-danger"
      onclick="showHotels(this)">
      Hotels
    </button>
  </div>

             <ul class="poi-results list-unstyled mt-2"></ul>
      </div>
    </div>

    <div class="col-md-4">
      <div class="place-card" 
            data-city="copenhagen"
            data-lat="55.6761"
            data-lng="12.5683">
        <img src="images/copenhagen.jpg" alt="Copenhagen">
        <div>
          <h6>Copenhagen</h6>
          <small>Copenhagen, Denmark</small>

           <ul class="poi-results list-unstyled mt-2 collapse"></ul>
        </div>

         <div class="d-flex gap-2 mt-2">
    <button class="btn btn-sm btn-outline-primary"
      onclick="showAttractions(this)">
      Attractions
    </button>
    <button class="btn btn-sm btn-outline-success"
      onclick="showRestaurants(this)">
      Food
    </button>
    <button class="btn btn-sm btn-outline-danger"
      onclick="showHotels(this)">
      Hotels
    </button>
  </div>

              <ul class="poi-results list-unstyled mt-2"></ul>
      </div>
    </div>
  </div>

  <div class="row g-4 mb-5">
    <div class="col-md-4">
      <div class="place-card" 
            data-city="london"
            data-lat="51.5074"
            data-lng="-0.1278">
        <img src="images/london.jpg" alt="London">
        <div>
          <h6>London</h6>
          <small>London, UK</small>

           <ul class="poi-results list-unstyled mt-2 collapse"></ul>
        </div>

         <div class="d-flex gap-2 mt-2">
    <button class="btn btn-sm btn-outline-primary"
      onclick="showAttractions(this)">
      Attractions
    </button>
    <button class="btn btn-sm btn-outline-success"
      onclick="showRestaurants(this)">
      Food
    </button>
    <button class="btn btn-sm btn-outline-danger"
      onclick="showHotels(this)">
      Hotels
    </button>
  </div>

            <ul class="poi-results list-unstyled mt-2"></ul>
      </div>
    </div>

    <div class="col-md-4">
      <div class="place-card" 
            data-city="prague"
            data-lat="50.0755"
            data-lng="14.4378">
        <img src="images/prague.jpg" alt="Prague">
        <div>
          <h6>Prague</h6>
          <small>Prague, Czechia</small>

           <ul class="poi-results list-unstyled mt-2 collapse"></ul>
        </div>

 <div class="d-flex gap-2 mt-2">
    <button class="btn btn-sm btn-outline-primary"
      onclick="showAttractions(this)">
      Attractions
    </button>
    <button class="btn btn-sm btn-outline-success"
      onclick="showRestaurants(this)">
      Food
    </button>
    <button class="btn btn-sm btn-outline-danger"
      onclick="showHotels(this)">
      Hotels
    </button>
  </div>

              <ul class="poi-results list-unstyled mt-2"></ul>
      </div>
    </div>

    <div class="col-md-4">
      <div class="place-card" 
            data-city="warsaw"
            data-lat="52.2297"
            data-lng="21.0122">
        <img src="images/warsaw.jpg" alt="Warsaw">
        <div>
          <h6>Warsaw</h6>
          <small>Warsaw, Poland</small>

           <ul class="poi-results list-unstyled mt-2 collapse"></ul>
        </div>
        
         <div class="d-flex gap-2 mt-2">
    <button class="btn btn-sm btn-outline-primary"
      onclick="showAttractions(this)">
      Attractions
    </button>
    <button class="btn btn-sm btn-outline-success"
      onclick="showRestaurants(this)">
      Food
    </button>
    <button class="btn btn-sm btn-outline-danger"
      onclick="showHotels(this)">
      Hotels
    </button>
  </div>

              <ul class="poi-results list-unstyled mt-2"></ul>
      </div>
    </div>
  </div>

  <!-- THIRD ROW -->
  <div class="row g-4 mb-5">
    <div class="col-md-4">
      <div class="place-card" 
            data-city="berlin"
            data-lat="52.5200"
            data-lng="13.4050">
        <img src="images/berlin.jpg" alt="Berlin">
        <div>
          <h6>Berlin</h6>
          <small>Berlin, Germany</small>

           <ul class="poi-results list-unstyled mt-2 collapse"></ul>
        </div>

         <div class="d-flex gap-2 mt-2">
    <button class="btn btn-sm btn-outline-primary"
      onclick="showAttractions(this)">
      Attractions
    </button>
    <button class="btn btn-sm btn-outline-success"
      onclick="showRestaurants(this)">
      Food
    </button>
    <button class="btn btn-sm btn-outline-danger"
      onclick="showHotels(this)">
      Hotels
    </button>
  </div>

              <ul class="poi-results list-unstyled mt-2"></ul>
      </div>
    </div>

    <div class="col-md-4">
      <div class="place-card" 
            data-city="madrid"
            data-lat="40.168"
            data-lng="-3.7038">
        <img src="images/madrid.jpg" alt="Madrid">
        <div>
          <h6>Madrid</h6>
          <small>Madrid, Spain</small>

           <ul class="poi-results list-unstyled mt-2 collapse"></ul>
        </div>


         <div class="d-flex gap-2 mt-2">
    <button class="btn btn-sm btn-outline-primary"
      onclick="showAttractions(this)">
      Attractions
    </button>
    <button class="btn btn-sm btn-outline-success"
      onclick="showRestaurants(this)">
      Food
    </button>
    <button class="btn btn-sm btn-outline-danger"
      onclick="showHotels(this)">
      Hotels
    </button>
  </div>

              <ul class="poi-results list-unstyled mt-2"></ul>
      </div>
    </div>

    <div class="col-md-4">
      <div class="place-card" 
            data-city="lisbon"
            data-lat="38.7223"
            data-lng="-9.1393">
        <img src="images/lisbon.jpg" alt="Lisbon">
        <div>
          <h6>Lisbon</h6>
          <small>Lisbon, Portugal</small>

           <ul class="poi-results list-unstyled mt-2 collapse"></ul>
        </div>


 <div class="d-flex gap-2 mt-2">
    <button class="btn btn-sm btn-outline-primary"
      onclick="showAttractions(this)">
      Attractions
    </button>
    <button class="btn btn-sm btn-outline-success"
      onclick="showRestaurants(this)">
      Food
    </button>
    <button class="btn btn-sm btn-outline-danger"
      onclick="showHotels(this)">
      Hotels
    </button>
  </div>


              <ul class="poi-results list-unstyled mt-2"></ul>
      </div>
    </div>
  </div>

<!-- MAP PLACEHOLDER -->
<div id="map" class="map-container mt-4"></div>

<!-- Details Container -->

<div id="placeDetails" class="place-details d-none">
  <h5 id="placeName"></h5>
  <p id="placeAddress" class="text-muted"></p>
  <p id="placeRating"></p>
  <div id="placePhotos" class="d-flex gap-2 mt-2"></div>
</div>

<!-- FOOTER -->
<footer class="footer bg-danger text-light py-3 mt-5">
  <div class="container d-flex justify-content-between align-items-center flex-wrap">
    <small>Copyright © 2026 Ashley Roberts. All rights reserved.</small>
    <strong>Euro City Stays</strong>
  </div>
</footer>

<!-- JS -->
<script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
<script src="./assets/js/destinations.js"></script>

<!-- FontAwesome script -->
<script src="https://kit.fontawesome.com/c818da147c.js" crossorigin="anonymous"></script>

<!-- Bootstrap script -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js" integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI" crossorigin="anonymous"></script>

</body>

</html>