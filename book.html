<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Book Now - Euro City Stays</title>
    <!-- CSS stylesheets -->
  <link rel="stylesheet" href="./assets/css/style.css" />
  <!-- Bootstrap link -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet" />
</head>

<!-- Google places API  -->
<script
  src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAJoOGB75_bpzjqUae_aj1kBl_JIZJdu4I&libraries=places&v=beta&loading=async"
  async
  defer
></script>

<body>

<!-- Navbar -->
<nav class="navbar navbar-expand-lg navbar-light bg-sky shadow-sm">
  <div class="container">
    <a class="navbar-brand fw-bold text-warning" href="index.html">Euro City Stays</a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#mainNav">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse justify-content-end" id="mainNav">
      <ul class="navbar-nav">
        <li class="nav-item"><a class="nav-link text-warning" href="index.html">Home</a></li>
        <li class="nav-item"><a class="nav-link text-warning" href="destinations.html">Destinations</a></li>
        <li class="nav-item">
          <a class="nav-link btn btn-warning text-dark px-3 ms-lg-2 active" href="book.html">BOOK NOW!</a>
        </li>
      </ul>
    </div>
  </div>
</nav>

<!-- PACKAGE HEADER -->
<section class="container my-5">
  <div class="package-hero p-4 p-lg-5">
    <div class="row g-4 align-items-center">
      
      <div class="col-lg-7">
        <h1 class="mb-2 text-white fw-semibold">Paris City Package</h1>
        <p class="text-white-50 mb-3">
          A simple city-break bundle with hotel + attractions + local food picks.
        </p>
      </div>

      <div class="col-lg-5">
        <div class="package-image rounded-4"></div>
      </div>

    </div>
  </div>
</section>


<!-- MAIN -->
<section class="container mb-5">
  <div class="row g-4">

    <!-- LEFT: PACKAGE DETAILS -->
    <div class="col-lg-7">

      <!-- Dates + Guests -->
      <div class="card p-4 mb-4">
        <h5 class="mb-3">Trip details</h5>

        <div class="row g-3">
          <div class="col-md-6">
            <label class="form-label">Check-in</label>
            <input type="date" class="form-control" id="checkIn" required />
          </div>
          <div class="col-md-6">
            <label class="form-label">Check-out</label>
            <input type="date" class="form-control" id="checkOut" required />
          </div>

          <div class="col-12">
            <label class="form-label">Guests</label>
            <div class="d-flex flex-wrap gap-2">
              <select class="form-select w-auto" id="adults" required>
                <option value="1" selected>Adults: 1</option>
                <option value="2">Adults: 2</option>
                <option value="3">Adults: 3</option>
                <option value="4">Adults: 4</option>
                <option value="5">Adults: 5</option>
              </select>

              <select class="form-select w-auto" id="children">
                <option value="0" selected>Children: 0</option>
                <option value="1">Children: 1</option>
                <option value="2">Children: 2</option>
                <option value="3">Children: 3</option>
                <option value="4">Children: 4</option>
              </select>
            

             <select class="form-select w-auto" id="toddlers">
                <option value="0" selected>Toddlers: 0</option>
                <option value="1">Toddlers: 1</option>
                <option value="2">Toddlers: 2</option>
                <option value="3">Toddlers: 3</option>
                <option value="4">Toddlers: 4</option>
              </select>
            

             <select class="form-select w-auto" id="babies">
                <option value="0" selected>Babies: 0</option>
                <option value="1">Babies: 1</option>
                <option value="2">Babies: 2</option>
                <option value="3">Babies: 3</option>
                <option value="4">Babies: 4</option>
              </select>
            </div>

            <small class="text-muted d-block mt-2">
              At least 1 adult is required.
            </small>
          </div>
        </div>
      </div>

       <!-- Choose package -->
      <div class="card p-4 mb-4">
        <h5 class="mb-3">Choose your package</h5>

        <div class="row g-3">

          <!-- Basic -->
          <div class="col-md-4">
            <label class="package-tier">
              <input type="radio" name="tier" value="basic" checked />
              <div class="tier-box">
                <div class="tier-top">
                  <strong>Basic</strong>
                  <span class="tier-price">£149</span>
                </div>
                <ul class="tier-list">
                  <li>Hotel shortlist</li>
                  <li>Top attractions</li>
                  <li>Food picks</li>
                </ul>
              </div>
            </label>
          </div>

             <!-- Plus -->
          <div class="col-md-4">
            <label class="package-tier">
              <input type="radio" name="tier" value="plus" />
              <div class="tier-box">
                <div class="tier-top">
                  <strong>Plus</strong>
                  <span class="tier-price">£199</span>
                </div>
                <ul class="tier-list">
                  <li>Everything in Basic</li>
                  <li>Neighbourhood guide</li>
                  <li>Transport tips</li>
                </ul>
              </div>
            </label>
          </div>

               <!-- Premium -->
          <div class="col-md-4">
            <label class="package-tier">
              <input type="radio" name="tier" value="premium" />
              <div class="tier-box">
                <div class="tier-top">
                  <strong>Premium</strong>
                  <span class="tier-price">£249</span>
                </div>
                <ul class="tier-list">
                  <li>Everything in Plus</li>
                  <li>Custom itinerary</li>
                  <li>Priority support</li>
                </ul>
              </div>
            </label>
          </div>
        </div>
      </div>

     <!-- Lead guest info -->
      <div class="card p-4">
        <h5 class="mb-3">Lead guest details</h5>

        <div class="row g-3">
          <div class="col-md-6">
            <input class="form-control" placeholder="First name" required />
          </div>
          <div class="col-md-6">
            <input class="form-control" placeholder="Last name" required />
          </div>
          <div class="col-md-6">
            <input class="form-control" type="email" placeholder="Email" required />
          </div>
          <div class="col-md-6">
            <input class="form-control" type="tel" placeholder="Phone (optional)" />
          </div>
        </div>
      </div>

    </div>

<!--Booking summary-->
    <div class="col-lg-5">
      <div class="card p-4 booking-summary sticky-top">
        <h5 class="mb-3">Booking summary</h5>

        <div class="summary-row">
          <span>Destination</span>
          <strong id="summaryCity">Paris</strong>
        </div>

        <div class="summary-row">
          <span>Dates</span>
          <strong id="summaryDates">Select dates</strong>
        </div>

        <div class="summary-row">
          <span>Guests</span>
          <strong id="summaryGuests">1 adult</strong>
        </div>

        <hr />

        <div class="summary-row">
          <span>Package</span>
          <strong id="summaryTier">Basic</strong>
        </div>

        <div class="summary-row">
          <span>Price</span>
          <strong id="summaryPrice">£149</strong>
        </div>

        <button class="btn btn-danger w-100 mt-3" id="confirmBtn">
          Confirm & Continue
        </button>

        <small class="text-muted d-block mt-2 text-center">
          No payment required yet (demo checkout).
        </small>
      </div>
    </div>

  </div>



</section>

<!-- Footer -->
<footer class="footer bg-danger text-light py-3">
  <div class="container d-flex justify-content-between align-items-center flex-wrap">
    <small>Copyright © 2026 Ashley Roberts. All rights reserved.</small>
    <strong>Euro City Stays</strong>
  </div>
</footer>

<!-- Bootstrap script -->
 <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js"></script>


<!-- JS to update summary -->
  <script>
  // --- Helpers ---
  function titleCaseCity(slug) {
    if (!slug) return "";
    return slug
      .split("-")
      .map(w => w.charAt(0).toUpperCase() + w.slice(1))
      .join(" ");
  }

  function getParams() {
    const params = new URLSearchParams(window.location.search);
    return {
      city: (params.get("city") || "paris").toLowerCase(),
      date: params.get("date") || "",
      adults: Math.max(1, parseInt(params.get("adults") || "1", 10)),
      children: Math.max(0, parseInt(params.get("children") || "0", 10)),
      toddlers: Math.max(0, parseInt(params.get("toddlers") || "0", 10)),
      babies: Math.max(0, parseInt(params.get("babies") || "0", 10)),
    };
  }

  async function setHeroPhotoFromPlaces(textQuery) {
    const hero = document.querySelector(".package-image");
    if (!hero) return;

    // If Places not ready, keep CSS fallback
    if (!window.google?.maps?.places) return;

    await google.maps.importLibrary("places");

    const { places } = await google.maps.places.Place.searchByText({
      textQuery,
      maxResultCount: 1,
      fields: ["photos"],
    });

    const photo = places?.[0]?.photos?.[0];
    if (!photo) return;

    const url = photo.getURI({ maxWidth: 1400, maxHeight: 800 });

    hero.style.backgroundImage =
      `linear-gradient(rgba(0,0,0,0.18), rgba(0,0,0,0.18)), url("${url}")`;
    hero.style.backgroundSize = "cover";
    hero.style.backgroundPosition = "center";
  }

  // --- Main booking logic ---
  document.addEventListener("DOMContentLoaded", () => {
    const checkIn = document.getElementById("checkIn");
    const checkOut = document.getElementById("checkOut");

    const adultsSel = document.getElementById("adults");
    const childrenSel = document.getElementById("children");
    const toddlersSel = document.getElementById("toddlers");
    const babiesSel = document.getElementById("babies");

    const summaryDates = document.getElementById("summaryDates");
    const summaryGuests = document.getElementById("summaryGuests");
    const summaryTier = document.getElementById("summaryTier");
    const summaryPrice = document.getElementById("summaryPrice");
    const summaryCity = document.getElementById("summaryCity");

    const prices = { basic: 149, plus: 199, premium: 249 };

    const p = getParams();

    // --- Set heading + summary city ---
    const cityName = titleCaseCity(p.city);
    const h1 = document.querySelector(".package-hero h1");
    if (h1) h1.textContent = `${cityName} City Package`;
    if (summaryCity) summaryCity.textContent = cityName;

    // --- Prefill form from URL ---
    if (checkIn && p.date) checkIn.value = p.date;

    if (adultsSel) adultsSel.value = String(p.adults);
    if (childrenSel) childrenSel.value = String(p.children);
    if (toddlersSel) toddlersSel.value = String(p.toddlers);
    if (babiesSel) babiesSel.value = String(p.babies);

    // --- Update functions ---
    function updateDates() {
      if (checkIn?.value && checkOut?.value) {
        summaryDates.textContent = `${checkIn.value} → ${checkOut.value}`;
      } else {
        summaryDates.textContent = "Select dates";
      }
      if (checkIn?.value && checkOut) checkOut.min = checkIn.value;
    }

    function updateGuests() {
      let a = parseInt(adultsSel?.value || "1", 10);
      let c = parseInt(childrenSel?.value || "0", 10);
      let t = parseInt(toddlersSel?.value || "0", 10);
      let b = parseInt(babiesSel?.value || "0", 10);

      // enforce minimum 1 adult
      if (a < 1) {
        a = 1;
        if (adultsSel) adultsSel.value = "1";
      }

      let text = `${a} adult${a > 1 ? "s" : ""}`;
      if (c > 0) text += ` · ${c} ${c === 1 ? "child" : "children"}`;
      if (t > 0) text += ` · ${t} toddler${t > 1 ? "s" : ""}`;
      if (b > 0) text += ` · ${b} bab${b === 1 ? "y" : "ies"}`;

      summaryGuests.textContent = text;
    }

    function updateTier() {
      const selected = document.querySelector('input[name="tier"]:checked')?.value || "basic";
      summaryTier.textContent = selected.charAt(0).toUpperCase() + selected.slice(1);
      summaryPrice.textContent = `£${prices[selected]}`;
    }

    // --- listeners ---
    [checkIn, checkOut].forEach(el => el && el.addEventListener("change", updateDates));
    [adultsSel, childrenSel, toddlersSel, babiesSel].forEach(el => el && el.addEventListener("change", updateGuests));
    document.querySelectorAll('input[name="tier"]').forEach(r => r.addEventListener("change", updateTier));

    // init summary
    updateDates();
    updateGuests();
    updateTier();

    // --- Hero image from Places (when Google is ready) ---
    const query = `${cityName} city`;
    let tries = 0;
    const timer = setInterval(async () => {
      tries++;
      if (window.google?.maps?.places) {
        clearInterval(timer);
        setHeroPhotoFromPlaces(query).catch(console.warn);
      }
      if (tries > 40) clearInterval(timer); // ~4s max
    }, 100);
  });
</script>


</script>



</body>
</html>
